<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <!-- 
      =============================================================================
      1. åŸºç¡€å…ƒæ•°æ®ä¸ç¬¬ä¸‰æ–¹åº“
      =============================================================================
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hudong ã® Blog</title>

    <!-- æ·»åŠ ç½‘ç«™ Logo (Favicon) -->
    <link rel="icon" href="./assets/logo.png" type="image/png">

    <!-- RSS è‡ªåŠ¨å‘ç°é“¾æ¥ -->
    <link rel="alternate" type="application/rss+xml" title="hudong Blog RSS Feed" href="rss.xml" />

    <!-- Tailwind CSS (æ ·å¼æ¡†æ¶) + Typography æ’ä»¶ (ç”¨äºç¾åŒ– Markdown å†…å®¹) -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    
    <!-- Marked.js (Markdown è§£æå™¨) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Tailwind å…¨å±€é…ç½® -->
    <script>
        tailwind.config = {
            darkMode: 'class', // å¯ç”¨åŸºäº class çš„æš—é»‘æ¨¡å¼
            theme: {
                extend: {
                    // è‡ªå®šä¹‰ä¸»é¢˜è‰²
                    colors: { 
                        primary: '#3b82f6', // ä¸»è‰²è°ƒ (è“è‰²)
                        darkBg: '#0f172a',  // æš—é»‘æ¨¡å¼èƒŒæ™¯è‰²
                        lightBg: '#f8fafc'  // æ˜äº®æ¨¡å¼èƒŒæ™¯è‰²
                    },
                    // è‡ªå®šä¹‰ Typography æ’ä»¶æ ·å¼ (ç”¨äº Markdown æ¸²æŸ“åŒºåŸŸ)
                    typography: ({ theme }) => ({
                        DEFAULT: {
                            css: {
                                maxWidth: '100%',
                                // å»é™¤ä»£ç å—å‰åçš„åå¼•å·
                                'code::before': { content: '""' },
                                'code::after': { content: '""' },
                                // è¡Œå†…ä»£ç æ ·å¼
                                'code:not(pre code)': { color: '#3b82f6', backgroundColor: '#eff6ff', padding: '2px 4px', borderRadius: '4px', fontWeight: '600' },
                                // ä»£ç å—å®¹å™¨æ ·å¼
                                'pre': { backgroundColor: '#1e293b !important', color: '#e2e8f0 !important', borderRadius: '0.5rem', position: 'relative' },
                                'pre code': { backgroundColor: 'transparent !important', color: 'inherit !important', padding: '0 !important' },
                                // æš—é»‘æ¨¡å¼ä¸‹çš„è¡Œå†…ä»£ç æ ·å¼
                                '.dark code:not(pre code)': { backgroundColor: '#334155', color: '#93c5fd' },
                                // é«˜äº®æ ‡è®°æ ·å¼
                                'mark': { backgroundColor: '#fef08a', padding: '0 4px', borderRadius: '4px' },
                                '.dark mark': { backgroundColor: 'rgba(234, 179, 8, 0.3)', color: '#fefce8' }
                            }
                        }
                    })
                }
            }
        }
    </script>
    
    <!-- è‡ªå®šä¹‰ CSS (æ»šåŠ¨æ¡ã€ç¯ç®±ç­‰é¢å¤–æ ·å¼) -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="bg-lightBg text-slate-800 dark:bg-darkBg dark:text-slate-200 min-h-screen flex flex-col transition-colors duration-300">
    
    <!-- 
      =============================================================================
      2. é¡¶éƒ¨å¯¼èˆªæ  (Navbar)
      =============================================================================
    -->
    <nav class="sticky top-0 z-50 backdrop-blur-lg bg-white/70 dark:bg-darkBg/90 border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-6xl mx-auto px-4 h-16 flex items-center gap-4">
            
            <!-- LogoåŒºåŸŸï¼šç‚¹å‡»è§¦å‘ goHome() å½»åº•é‡ç½®çŠ¶æ€å›åˆ°é¦–é¡µ -->
            <a href="#/" onclick="goHome()" class="flex-shrink-0 text-xl font-bold tracking-tighter hover:text-primary transition">
                hudong ã® <span class="text-primary">Blog</span>
            </a>

            <!-- æœç´¢æ¡†åŒºåŸŸ -->
            <div class="flex-grow max-w-md mx-auto relative group">
                <!-- æœç´¢å›¾æ ‡ -->
                <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none text-slate-400">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <!-- è¾“å…¥æ¡†ï¼šç»‘å®šäº† input äº‹ä»¶ç›‘å¬ -->
                <input type="text" id="search-input" placeholder="è¾“å…¥å…³é”®å­—æœç´¢..." 
                    class="w-full bg-slate-100 dark:bg-slate-800 border-none rounded-full pl-10 pr-10 py-2 text-sm focus:ring-2 focus:ring-primary transition">
                <!-- æ¸…é™¤æŒ‰é’®ï¼šé»˜è®¤éšè—ï¼Œæœ‰è¾“å…¥æ—¶æ˜¾ç¤ºï¼Œç‚¹å‡»è§¦å‘ clearFilter() -->
                <button id="search-clear" onclick="clearFilter()" class="hidden absolute inset-y-0 right-3 flex items-center text-slate-400 hover:text-red-500 transition">âœ•</button>
            </div>

            <!-- å³ä¾§åŠŸèƒ½åŒº -->
            <div class="flex items-center gap-2">
                <!-- é¦–é¡µé“¾æ¥ (æ¡Œé¢ç«¯æ˜¾ç¤º) -->
                <a href="#/" onclick="goHome()" class="hidden sm:block text-sm font-medium hover:text-primary transition px-3 py-2">é¦–é¡µ</a>
                <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® (æš—é»‘/æ˜äº®æ¨¡å¼) -->
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition text-xl">ğŸŒ—</button>
            </div>
        </div>
    </nav>

    <!-- 
      =============================================================================
      3. ä¸»å†…å®¹åŒºåŸŸ (Main Content)
      åŒ…å«ä¸¤ä¸ªäº’æ–¥çš„è§†å›¾ï¼šé¦–é¡µè§†å›¾ (home-view) å’Œ æ–‡ç« è¯¦æƒ…è§†å›¾ (article-view)
      =============================================================================
    -->
    <main class="flex-grow max-w-6xl mx-auto w-full px-4 py-8">
        
        <!-- [è§†å›¾ A] é¦–é¡µ/åˆ—è¡¨è§†å›¾ -->
        <div id="home-view" class="animate-fade-in flex flex-col lg:flex-row gap-8">
            <!-- å·¦ä¾§ï¼šæ–‡ç« åˆ—è¡¨åŒº -->
            <div class="w-full lg:w-3/4">
                <!-- å½“å‰ç­›é€‰çŠ¶æ€æç¤ºæ¡ (æœç´¢æˆ–åˆ†ç±»ç­›é€‰æ—¶æ˜¾ç¤º) -->
                <div id="current-filter-label" class="mb-6 hidden flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800 shadow-sm">
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-slate-500 dark:text-slate-400">ç»“æœå±•ç¤ºï¼š</span>
                        <span id="filter-name" class="font-bold text-primary text-lg"></span>
                    </div>
                    <!-- é‡ç½®æŒ‰é’® -->
                    <button onclick="clearFilter()" class="text-sm px-4 py-1.5 rounded-full bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:text-red-500 shadow-sm transition">é‡ç½®</button>
                </div>
                
                <!-- æ–‡ç« å¡ç‰‡æŒ‚è½½ç‚¹ -->
                <div id="post-list" class="space-y-6"></div>
            </div>

            <!-- å³ä¾§ï¼šä¾§è¾¹æ  (åˆ†ç±»åˆ—è¡¨) -->
            <aside class="w-full lg:w-1/4">
                <div class="sticky top-24">
                    <div class="bg-white dark:bg-slate-900/50 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800">
                        <h3 class="font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2 text-sm uppercase tracking-wider">ğŸ“‚ æ–‡ç« åˆ†ç±»</h3>
                        <!-- åˆ†ç±»åˆ—è¡¨æŒ‚è½½ç‚¹ -->
                        <div id="category-list" class="flex flex-col gap-1"></div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- [è§†å›¾ B] æ–‡ç« è¯¦æƒ…è§†å›¾ (é»˜è®¤éšè—) -->
        <div id="article-view" class="hidden flex flex-col lg:flex-row gap-8 relative">
            <!-- å·¦ä¾§ï¼šæ–‡ç« ç›®å½• (TOC) -->
            <aside class="hidden lg:block w-64 flex-shrink-0">
                <div class="sticky top-24 max-h-[80vh] overflow-y-auto no-scrollbar">
                    <h3 class="font-bold mb-4 text-slate-900 dark:text-slate-100 uppercase text-xs tracking-widest">æ–‡ç« ç›®å½•</h3>
                    <!-- ç›®å½•æŒ‚è½½ç‚¹ -->
                    <nav id="toc-container" class="space-y-1 text-sm border-l border-slate-200 dark:border-slate-700"></nav>
                </div>
            </aside>
            
            <!-- å³ä¾§ï¼šæ–‡ç« æ­£æ–‡åŒº -->
            <article class="flex-grow min-w-0">
                <!-- Markdown å†…å®¹æŒ‚è½½ç‚¹ -->
                <div id="article-content" class="bg-white dark:bg-slate-900/50 p-6 sm:p-10 rounded-xl shadow-sm ring-1 ring-slate-900/5 dark:ring-white/10"></div>
                <!-- åº•éƒ¨å¯¼èˆª (ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡) æŒ‚è½½ç‚¹ -->
                <div id="post-nav" class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
            </article>
        </div>
    </main>

    <!-- 
      =============================================================================
      4. å…¨å±€æµ®åŠ¨ç»„ä»¶ & é¡µè„š
      =============================================================================
    -->

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® (æ»šåŠ¨è¶…è¿‡ 400px æ˜¾ç¤º) -->
    <button id="back-to-top" onclick="window.scrollTo({top:0, behavior:'smooth'})" 
        class="fixed bottom-8 right-8 bg-primary text-white p-3 rounded-full shadow-lg transition-all duration-300 transform translate-y-20 opacity-0 pointer-events-none hover:scale-110">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
    </button>

    <!-- å›¾ç‰‡ç¯ç®± (å…¨å±æŸ¥çœ‹å›¾ç‰‡) -->
    <div id="lightbox" onclick="closeLightbox()"><span id="lightbox-close">&times;</span><img id="lightbox-img" src="" alt="Full Image"></div>

    <!-- é¡µè„šä¿¡æ¯ -->
    <footer class="border-t border-slate-200 dark:border-slate-800 py-6 text-center text-sm text-slate-500 mt-auto">
        &copy; 2025 - 2025 
        <a href="rss.xml" target="_blank" class="hover:text-primary transition-colors mx-1">RSS</a>
        <a href="https://github.com/hudongyida/blog" class="hover:text-primary transition-colors mx-1">Github</a> 
    </footer>

    <!-- 
      =============================================================================
      5. æ ¸å¿ƒé€»è¾‘è„šæœ¬å¼•å…¥
      =============================================================================
    -->
    <script src="assets/js/main.js"></script>
</body>
</html>